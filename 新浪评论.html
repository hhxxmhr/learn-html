<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新浪评论</title>
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    #div1 {
        text-align: center;
    }

    #ul1 {
        width: 400px;
        height: 400px;
        border: 1px solid black;
        margin: 0 auto;
        overflow: auto;
    }

    #ul1 li {
        border-bottom: 1px #999999 dashed;
        padding: 10px;
        list-style: none;
        font-size: 18px;
        overflow: hidden;
        filter: alpha(opacity:0);
        opacity: 0;
    }
</style>
<script src="move-perfect.js"></script>
<script>
    window.onload = function () {
        let oTxt = document.getElementById("txt1");
        let oBtn = document.getElementById("btn1");
        let oUl = document.getElementById("ul1");
        oBtn.onclick = function () {
            let oLi = document.createElement('li');
            oLi.innerHTML = oTxt.value;
            oTxt.value = '';
            if (oUl.children.length > 0) {
                oUl.insertBefore(oLi, oUl.children[0]);
            } else {
                oUl.appendChild(oLi);
            }
            oLi.style.height = '0';
            console.log('oLi.clientHeight ' + oLi.clientHeight);
            console.log('oLi.offsetHeight ' + oLi.offsetHeight);
            perfectStartMove(oLi, {height: oLi.offsetHeight}, function () {
                perfectStartMove(oLi, {opacity: 100})
            })
        }
    }
</script>
<body>
<div id="div1">
    <textarea id="txt1" rows="4" cols="40"></textarea>
    <input id="btn1" type="button" value=发布>
</div>
<ul id="ul1">
    <li>hdfkjsdvjkbj</li>
</ul>
</body>
</html>